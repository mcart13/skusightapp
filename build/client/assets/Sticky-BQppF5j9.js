import{g as y,r as h,S as l}from"./index-C_P7ACqV.js";import{S as g,g as S}from"./context-CISPVU1J.js";import{M as m}from"./Page-D9F0KSCl.js";var p,d;function v(){if(d)return p;d=1;var a=typeof Element<"u",s=typeof Map=="function",n=typeof Set=="function",c=typeof ArrayBuffer=="function"&&!!ArrayBuffer.isView;function i(e,t){if(e===t)return!0;if(e&&t&&typeof e=="object"&&typeof t=="object"){if(e.constructor!==t.constructor)return!1;var o,r,f;if(Array.isArray(e)){if(o=e.length,o!=t.length)return!1;for(r=o;r--!==0;)if(!i(e[r],t[r]))return!1;return!0}var u;if(s&&e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(u=e.entries();!(r=u.next()).done;)if(!t.has(r.value[0]))return!1;for(u=e.entries();!(r=u.next()).done;)if(!i(r.value[1],t.get(r.value[0])))return!1;return!0}if(n&&e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(u=e.entries();!(r=u.next()).done;)if(!t.has(r.value[0]))return!1;return!0}if(c&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(t)){if(o=e.length,o!=t.length)return!1;for(r=o;r--!==0;)if(e[r]!==t[r])return!1;return!0}if(e.constructor===RegExp)return e.source===t.source&&e.flags===t.flags;if(e.valueOf!==Object.prototype.valueOf&&typeof e.valueOf=="function"&&typeof t.valueOf=="function")return e.valueOf()===t.valueOf();if(e.toString!==Object.prototype.toString&&typeof e.toString=="function"&&typeof t.toString=="function")return e.toString()===t.toString();if(f=Object.keys(e),o=f.length,o!==Object.keys(t).length)return!1;for(r=o;r--!==0;)if(!Object.prototype.hasOwnProperty.call(t,f[r]))return!1;if(a&&e instanceof Element)return!1;for(r=o;r--!==0;)if(!((f[r]==="_owner"||f[r]==="__v"||f[r]==="__o")&&e.$$typeof)&&!i(e[f[r]],t[f[r]]))return!1;return!0}return e!==e&&t!==t}return p=function(t,o){try{return i(t,o)}catch(r){if((r.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw r}},p}var k=v();const j=y(k);function N(){const a=h.useContext(g);if(!a)throw new m("No StickyManager was provided.");return a}class E extends h.Component{constructor(...s){super(...s),this.state={isSticky:!1,style:{}},this.placeHolderNode=null,this.stickyNode=null,this.setPlaceHolderNode=n=>{this.placeHolderNode=n},this.setStickyNode=n=>{this.stickyNode=n},this.handlePositioning=(n,c=0,i=0,e=0)=>{const{isSticky:t}=this.state;(n&&!t||!n&&t)&&(this.adjustPlaceHolderNode(n),this.setState({isSticky:!t},()=>{if(this.props.onStickyChange==null||(this.props.onStickyChange(!t),this.props.boundingElement==null))return null;this.props.boundingElement.toggleAttribute("data-sticky-active")}));const o=n?{position:"fixed",top:c,left:i,width:e}:{};this.setState({style:o})},this.adjustPlaceHolderNode=n=>{this.placeHolderNode&&this.stickyNode&&(this.placeHolderNode.style.paddingBottom=n?`${S(this.stickyNode).height}px`:"0px")}}componentDidMount(){const{boundingElement:s,offset:n=!1,disableWhenStacked:c=!1,stickyManager:i}=this.props;!this.stickyNode||!this.placeHolderNode||i.registerStickyItem({stickyNode:this.stickyNode,placeHolderNode:this.placeHolderNode,handlePositioning:this.handlePositioning,offset:n,boundingElement:s,disableWhenStacked:c})}componentWillUnmount(){const{stickyManager:s}=this.props;this.stickyNode&&s.unregisterStickyItem(this.stickyNode)}render(){const{style:s,isSticky:n}=this.state,{children:c}=this.props,i=M(c)?c(n):c;return l.createElement("div",null,l.createElement("div",{ref:this.setPlaceHolderNode}),l.createElement("div",{ref:this.setStickyNode,style:s},i))}}function M(a){return typeof a=="function"}function C(a){const s=N();return l.createElement(E,Object.assign({},a,{stickyManager:s}))}export{C as S,j as i};
