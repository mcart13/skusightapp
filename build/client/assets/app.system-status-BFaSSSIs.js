import{r as i,j as e}from"./index-C_P7ACqV.js";import{u as h,a as u,e as g}from"./components-CgIgXmEm.js";function b(){const{status:s}=h(),d=u(),o=g(),[a,l]=i.useState(!1),[c,p]=i.useState("*"),x=()=>{const r=new FormData;r.append("action","run-now"),r.append("fullSync",a.toString()),o(r,{method:"post"})},t=(r=null)=>{const n=new FormData;n.append("action","clear-cache"),r&&n.append("pattern",r),o(n,{method:"post"})};return e.jsxs("div",{style:{padding:"20px"},children:[e.jsx("h1",{children:"System Status Dashboard"}),e.jsxs("div",{style:{marginBottom:"30px",padding:"15px",border:"1px solid #ddd",borderRadius:"5px"},children:[e.jsx("h2",{children:"System Overview"}),e.jsxs("p",{children:["System Status: ",s.aiTaggingEnabled?"Active":"Paused"]}),e.jsxs("p",{children:["Last Run: ",s.lastRun]}),e.jsxs("p",{children:["Next Scheduled Run: ",s.nextScheduledRun]}),e.jsxs("p",{children:["Performance Threshold: ",(s.performanceThreshold/1e3).toFixed(0)," seconds"]}),e.jsxs("div",{style:{display:"flex",alignItems:"center",margin:"10px 0"},children:[e.jsx("input",{type:"checkbox",id:"fullSync",checked:a,onChange:r=>l(r.target.checked),style:{marginRight:"8px"}}),e.jsx("label",{htmlFor:"fullSync",children:"Full Sync (process all products, may take longer)"})]}),e.jsx("button",{onClick:x,style:{backgroundColor:"#008060",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer",marginTop:"10px"},children:"Run Tagging Job Now"})]}),e.jsxs("div",{style:{marginBottom:"30px",padding:"15px",border:"1px solid #ddd",borderRadius:"5px"},children:[e.jsx("h2",{children:"Tagging Statistics"}),e.jsxs("p",{children:["Total Products: ",s.stats.totalProducts]}),e.jsxs("p",{children:["Products Tagged: ",s.stats.productsTagged," (",s.stats.percentTagged,"%)"]}),e.jsxs("p",{children:["Average Tags per Product: ",s.stats.averageTagsPerProduct]}),e.jsxs("p",{children:["Last Run Duration: ",s.stats.lastRunDuration]})]}),s.cacheStats&&e.jsxs("div",{style:{marginBottom:"30px",padding:"15px",border:"1px solid #ddd",borderRadius:"5px"},children:[e.jsx("h2",{children:"Cache Status"}),e.jsxs("p",{children:["Status: ",e.jsx("span",{style:{color:s.cacheStats.status==="connected"?"#008060":"#cc0000"},children:s.cacheStats.status})]}),e.jsxs("p",{children:["Keys Stored: ",s.cacheStats.keyCount]}),e.jsxs("p",{children:["Memory Usage: ",s.cacheStats.memoryUsage]}),e.jsxs("p",{children:["Hit Rate: ",s.cacheStats.hitRate,"%"]}),e.jsxs("p",{children:["Uptime: ",s.cacheStats.uptime," minutes"]}),e.jsxs("div",{style:{margin:"15px 0",display:"flex",gap:"10px",flexWrap:"wrap"},children:[e.jsx("button",{onClick:()=>t(),style:{backgroundColor:"#cc0000",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer"},children:"Clear All Caches"}),e.jsx("button",{onClick:()=>t("products:*"),style:{backgroundColor:"#e67700",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer"},children:"Clear Product Cache"}),e.jsx("button",{onClick:()=>t("orders:*"),style:{backgroundColor:"#e67700",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer"},children:"Clear Orders Cache"}),e.jsx("button",{onClick:()=>t("metrics:*"),style:{backgroundColor:"#e67700",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer"},children:"Clear Metrics Cache"})]}),e.jsxs("div",{style:{marginTop:"15px"},children:[e.jsx("p",{style:{marginBottom:"5px"},children:"Clear cache by pattern:"}),e.jsxs("div",{style:{display:"flex",gap:"10px"},children:[e.jsx("input",{type:"text",value:c,onChange:r=>p(r.target.value),placeholder:"Cache pattern (e.g., products:*)",style:{padding:"8px",borderRadius:"4px",border:"1px solid #ddd",flex:1}}),e.jsx("button",{onClick:()=>t(c),style:{backgroundColor:"#666",color:"white",border:"none",padding:"8px 16px",borderRadius:"4px",cursor:"pointer"},children:"Clear"})]})]})]}),e.jsxs("div",{style:{padding:"15px",border:"1px solid #ddd",borderRadius:"5px"},children:[e.jsx("h2",{children:"Recent Alerts"}),s.recentAlerts&&s.recentAlerts.length>0?e.jsx("ul",{style:{listStyleType:"none",padding:0},children:s.recentAlerts.map(r=>e.jsxs("li",{style:{padding:"10px",marginBottom:"10px",backgroundColor:r.level==="error"?"#ffebee":r.level==="warning"?"#fff8e1":"#e8f5e9",borderRadius:"3px"},children:[e.jsxs("p",{children:[e.jsx("strong",{children:r.timestamp})," - ",r.level.toUpperCase()]}),e.jsx("p",{children:r.message}),e.jsxs("p",{style:{fontSize:"0.9em",color:"#777"},children:["Source: ",r.source||"System"]})]},r.id))}):e.jsx("p",{children:"No recent alerts to display."})]}),d&&e.jsx("div",{style:{marginTop:"20px",padding:"10px 15px",backgroundColor:d.success?"#e8f5e9":"#ffebee",borderRadius:"4px"},children:e.jsx("p",{children:d.message})})]})}export{b as default};
