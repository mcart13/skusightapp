const r="skusight_settings",a="skusight_settings_changed",S={leadTime:7,notificationPreferences:["email"],advancedEnabled:!1,safetyStockDays:14,serviceLevelPercent:95,lowStockThreshold:7,criticalStockThreshold:3,forecastDays:30,restockStrategy:"economic",aiTaggingEnabled:!0,aiTaggingFrequency:"daily",aiTaggingBatchSize:"50",aiTaggingDataSources:["metadata","sales","margins","seasonal","leadtime"]};function T(){if(typeof window<"u")try{const t=localStorage.getItem(r);if(t)return JSON.parse(t)}catch(t){console.error("Error loading settings:",t)}return S}function k(t){if(typeof window<"u"){localStorage.setItem(r,JSON.stringify(t));const e=new CustomEvent(a,{detail:{settings:t}});return window.dispatchEvent(e),!0}return!1}function y(t){if(typeof window<"u"){const e=n=>{t(n.detail.settings)};return window.addEventListener(a,e),()=>{window.removeEventListener(a,e)}}return()=>{}}function w(t,e){const n=T(),l=n.safetyStockDays||14,s=Math.ceil(e*l),d=n.leadTime||7,i=Math.ceil(e*d),c=i+s,g=n.lowStockThreshold||7,f=Math.ceil(e*g),h=n.criticalStockThreshold||3,u=Math.ceil(e*h);let o;switch(n.restockStrategy){case"jit":o=i;break;case"fixed":o=c-t.inventoryQuantity;break;case"economic":default:o=Math.ceil(e*30);break}return{safetyStock:s,leadTimeBuffer:i,reorderPoint:c,lowStockLevel:f,criticalStockLevel:u,optimalOrderQty:Math.max(0,o),daysUntilStockout:e>0?Math.ceil(t.inventoryQuantity/e):1/0}}export{w as a,k as b,T as g,y as s};
