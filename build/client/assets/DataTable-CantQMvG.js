import{S as s,r as P}from"./index-C_P7ACqV.js";import{i as ae,S as ie}from"./Sticky-BQppF5j9.js";import{h as J,a as ne,d as oe,E as X}from"./context-CISPVU1J.js";import{u as K,d as D,v as re,n as ce,I as de,B as Y,o as ue,p as he,q as me}from"./Page-D9F0KSCl.js";var le=function(r){return s.createElement("svg",Object.assign({viewBox:"0 0 20 20"},r),s.createElement("path",{fillRule:"evenodd",d:"M9.116 4.323a1.25 1.25 0 0 1 1.768 0l2.646 2.647a.75.75 0 0 1-1.06 1.06l-2.47-2.47-2.47 2.47a.75.75 0 1 1-1.06-1.06l2.646-2.647Z"}),s.createElement("path",{fillOpacity:.33,fillRule:"evenodd",d:"M9.116 15.677a1.25 1.25 0 0 0 1.768 0l2.646-2.647a.75.75 0 0 0-1.06-1.06l-2.47 2.47-2.47-2.47a.75.75 0 0 0-1.06 1.06l2.646 2.647Z"}))};le.displayName="SortAscendingIcon";var se=function(r){return s.createElement("svg",Object.assign({viewBox:"0 0 20 20"},r),s.createElement("path",{fillOpacity:.33,fillRule:"evenodd",d:"M9.116 4.823a1.25 1.25 0 0 1 1.768 0l2.646 2.647a.75.75 0 0 1-1.06 1.06l-2.47-2.47-2.47 2.47a.75.75 0 1 1-1.06-1.06l2.646-2.647Z"}),s.createElement("path",{fillRule:"evenodd",d:"M9.116 15.177a1.25 1.25 0 0 0 1.768 0l2.646-2.647a.75.75 0 0 0-1.06-1.06l-2.47 2.47-2.47-2.47a.75.75 0 0 0-1.06 1.06l2.646 2.647Z"}))};se.displayName="SortDescendingIcon";function fe(f){return function(r,t){const{firstVisibleColumnIndex:e,tableLeftVisibleEdge:l,tableRightVisibleEdge:a}=f,c=r.offsetLeft,d=c+r.offsetWidth,n=ee(c,l,a,"left"),o=ee(d,l,a,"right"),u=n||o,h=r.offsetWidth;return u&&(f.firstVisibleColumnIndex=Math.min(e,t)),{leftEdge:c,rightEdge:d,isVisible:u,width:h,index:t}}}function ee(f,r,t,e){return f>=r+(e==="left"?0:30)&&f<=t-30}function be(f,r){const{firstVisibleColumnIndex:t}=f,e=Math.max(t-1,0),l=r[e],a=r[t];return{previousColumn:l,currentColumn:a}}var i={DataTable:"Polaris-DataTable",condensed:"Polaris-DataTable--condensed",Navigation:"Polaris-DataTable__Navigation",Pip:"Polaris-DataTable__Pip","Pip-visible":"Polaris-DataTable__Pip--visible",ScrollContainer:"Polaris-DataTable__ScrollContainer",Table:"Polaris-DataTable__Table",TableRow:"Polaris-DataTable__TableRow",Cell:"Polaris-DataTable__Cell",IncreasedTableDensity:"Polaris-DataTable__IncreasedTableDensity",ZebraStripingOnData:"Polaris-DataTable__ZebraStripingOnData",RowCountIsEven:"Polaris-DataTable__RowCountIsEven",ShowTotalsInFooter:"Polaris-DataTable__ShowTotalsInFooter","Cell-separate":"Polaris-DataTable__Cell--separate","Cell-firstColumn":"Polaris-DataTable__Cell--firstColumn","Cell-numeric":"Polaris-DataTable__Cell--numeric","Cell-truncated":"Polaris-DataTable__Cell--truncated","Cell-header":"Polaris-DataTable__Cell--header","Cell-sortable":"Polaris-DataTable__Cell--sortable","Heading-left":"Polaris-DataTable__Heading--left","Cell-verticalAlignTop":"Polaris-DataTable__Cell--verticalAlignTop","Cell-verticalAlignBottom":"Polaris-DataTable__Cell--verticalAlignBottom","Cell-verticalAlignMiddle":"Polaris-DataTable__Cell--verticalAlignMiddle","Cell-verticalAlignBaseline":"Polaris-DataTable__Cell--verticalAlignBaseline",hoverable:"Polaris-DataTable--hoverable","Cell-hovered":"Polaris-DataTable__Cell--hovered",Icon:"Polaris-DataTable__Icon",Heading:"Polaris-DataTable__Heading",StickyHeaderEnabled:"Polaris-DataTable__StickyHeaderEnabled",StickyHeaderWrapper:"Polaris-DataTable__StickyHeaderWrapper","Cell-sorted":"Polaris-DataTable__Cell--sorted","Cell-total":"Polaris-DataTable__Cell--total",ShowTotals:"Polaris-DataTable__ShowTotals","Cell-total-footer":"Polaris-DataTable--cellTotalFooter",Footer:"Polaris-DataTable__Footer",StickyHeaderInner:"Polaris-DataTable__StickyHeaderInner","StickyHeaderInner-isSticky":"Polaris-DataTable__StickyHeaderInner--isSticky",StickyHeaderTable:"Polaris-DataTable__StickyHeaderTable",FixedFirstColumn:"Polaris-DataTable__FixedFirstColumn",StickyTableHeadingsRow:"Polaris-DataTable__StickyTableHeadingsRow",TooltipContent:"Polaris-DataTable__TooltipContent"};function A({content:f,contentType:r,nthColumn:t,firstColumn:e,truncate:l,header:a,total:c,totalInFooter:d,sorted:n,sortable:o,sortDirection:u,inFixedNthColumn:h,verticalAlign:m="top",defaultSortDirection:b="ascending",onSort:g,colSpan:y,setRef:T=()=>{},stickyHeadingCell:E=!1,stickyCellWidth:_,hovered:L=!1,handleFocus:k=()=>{},hasFixedNthColumn:R=!1,fixedCellVisible:w=!1,firstColumnMinWidth:F,style:S,lastFixedFirstColumn:v}){const x=K(),I=r==="numeric",N=D(i.Cell,i[`Cell-${re("verticalAlign",m)}`],e&&i["Cell-firstColumn"],l&&i["Cell-truncated"],a&&i["Cell-header"],c&&i["Cell-total"],d&&i["Cell-total-footer"],I&&i["Cell-numeric"],o&&i["Cell-sortable"],n&&i["Cell-sorted"],E&&i.StickyHeaderCell,L&&i["Cell-hovered"],v&&h&&w&&i["Cell-separate"],t&&h&&E&&i.FixedFirstColumn),O=D(a&&i.Heading,a&&r==="text"&&i["Heading-left"]),B=D(o&&i.Icon),W=n&&u?u:b,$=W==="descending"?se:le,j=u==="ascending"?"descending":"ascending",q=x.translate("Polaris.DataTable.sortAccessibilityLabel",{direction:n?j:W}),M=s.createElement("span",{className:B},s.createElement(de,{source:$,accessibilityLabel:q})),Z=!(E&&R&&t&&!h),V=o?s.createElement("button",{className:O,onClick:g,onFocus:k,tabIndex:Z?0:-1},M,f):f,H=y&&y>1?{colSpan:y}:{},C=t&&F?{minWidth:F}:{minWidth:_},p=s.createElement("th",Object.assign({ref:T},J.props,H,{className:N,"aria-sort":u,style:{...S,...C},"data-index-table-sticky-heading":!0}),V),U=a?s.createElement("th",Object.assign({},J.props,{"aria-sort":u},H,{ref:T,className:N,scope:"col",style:{...C}}),V):s.createElement("th",Object.assign({},H,{ref:T,className:N,scope:"row",style:{...C}}),l?s.createElement(Ce,{className:i.TooltipContent},f):f),G=a||e||t?U:s.createElement("td",Object.assign({className:N},H),f);return E?p:G}const Ce=({children:f,className:r=""})=>{const t=P.useRef(null),{current:e}=t,l=s.createElement("span",{ref:t,className:r},f);return(e==null?void 0:e.scrollWidth)>(e==null?void 0:e.offsetWidth)?s.createElement(ce,{content:t.current.innerText},l):l};function ge({children:f,onMount:r,fallback:t=null}){const e=ne(),l=e?f:t;return P.useEffect(()=>{e&&r&&r()},[e,r]),s.createElement(s.Fragment,null,l)}function pe({columnVisibilityData:f,isScrolledFarthestLeft:r,isScrolledFarthestRight:t,navigateTableLeft:e,navigateTableRight:l,fixedFirstColumns:a,setRef:c=()=>{}}){const d=K(),n=f.map((h,m)=>{if(m<a)return;const b=D(i.Pip,h.isVisible&&i["Pip-visible"]);return s.createElement("div",{className:b,key:`pip-${m}`})}),o=d.translate("Polaris.DataTable.navAccessibilityLabel",{direction:"left"}),u=d.translate("Polaris.DataTable.navAccessibilityLabel",{direction:"right"});return s.createElement("div",{className:i.Navigation,ref:c},s.createElement(Y,{variant:"tertiary",icon:ue,disabled:r,accessibilityLabel:o,onClick:e}),n,s.createElement(Y,{variant:"tertiary",icon:he,disabled:t,accessibilityLabel:u,onClick:l}))}const te=f=>{const r=[];return f&&f.forEach(t=>{r.push(t.clientHeight)}),r};class ye extends P.PureComponent{constructor(...r){super(...r),this.state={condensed:!1,columnVisibilityData:[],isScrolledFarthestLeft:!0,isScrolledFarthestRight:!1,rowHovered:void 0},this.dataTable=P.createRef(),this.scrollContainer=P.createRef(),this.table=P.createRef(),this.stickyTable=P.createRef(),this.stickyNav=null,this.headerNav=null,this.tableHeadings=[],this.stickyHeadings=[],this.tableHeadingWidths=[],this.stickyHeaderActive=!1,this.scrollStopTimer=null,this.handleResize=oe(()=>{const{table:{current:t},scrollContainer:{current:e}}=this;let l=!1;t&&e&&(l=t.scrollWidth>e.clientWidth+1),this.setState({condensed:l,...this.calculateColumnVisibilityData(l)})}),this.setCellRef=({ref:t,index:e,inStickyHeader:l})=>{if(t!=null)if(l){this.stickyHeadings[e]=t;const a=t.querySelector("button");if(a==null)return;a.addEventListener("focus",this.handleHeaderButtonFocus)}else this.tableHeadings[e]=t,this.tableHeadingWidths[e]=t.clientWidth},this.changeHeadingFocus=()=>{const{tableHeadings:t,stickyHeadings:e,stickyNav:l,headerNav:a}=this,c=e.findIndex(b=>{var g;return b===((g=document.activeElement)==null?void 0:g.parentElement)}),d=t.findIndex(b=>{var g;return b===((g=document.activeElement)==null?void 0:g.parentElement)}),n=l==null?void 0:l.querySelectorAll("button"),o=a==null?void 0:a.querySelectorAll("button");let u=-1;n==null||n.forEach((b,g)=>{b===document.activeElement&&(u=g)});let h=-1;if(o==null||o.forEach((b,g)=>{b===document.activeElement&&(h=g)}),c<0&&d<0&&u<0&&h<0)return null;let m;if(c>=0?m=t[c].querySelector("button"):d>=0&&(m=e[d].querySelector("button")),u>=0?m=o==null?void 0:o[u]:h>=0&&(m=n==null?void 0:n[h]),m==null)return null;m.style.visibility="visible",m.focus(),m.style.removeProperty("visibility")},this.calculateColumnVisibilityData=t=>{const e=this.fixedFirstColumns(),{table:{current:l},scrollContainer:{current:a},dataTable:{current:c}}=this,{stickyHeader:d}=this.props;if((d||t)&&l&&a&&c){const n=l.querySelectorAll(J.selector),o=n[e-1],u=e?o.offsetLeft+o.offsetWidth:0;if(n.length>0){const h=n.length-1,m=a.scrollLeft+u,b=a.scrollLeft+c.offsetWidth,g={firstVisibleColumnIndex:h,tableLeftVisibleEdge:m,tableRightVisibleEdge:b},y=[...n].map(fe(g)),T=y[y.length-1],E=e?m===u:m===0;return{columnVisibilityData:y,...be(g,y),isScrolledFarthestLeft:E,isScrolledFarthestRight:T.rightEdge<=b}}}return{columnVisibilityData:[],previousColumn:void 0,currentColumn:void 0}},this.handleHeaderButtonFocus=t=>{var m;const e=this.fixedFirstColumns();if(this.scrollContainer.current==null||t.target==null||this.state.columnVisibilityData.length===0)return;const a=t.target.parentNode,c=this.scrollContainer.current.scrollLeft,d=this.scrollContainer.current.offsetWidth,n=c+d,o=this.state.columnVisibilityData.length>0?(m=this.state.columnVisibilityData[e])==null?void 0:m.rightEdge:0,u=a.offsetLeft,h=a.offsetLeft+a.offsetWidth;c>u-o&&(this.scrollContainer.current.scrollLeft=u-o),h>n&&(this.scrollContainer.current.scrollLeft=h-d)},this.stickyHeaderScrolling=()=>{const{current:t}=this.stickyTable,{current:e}=this.scrollContainer;t==null||e==null||(t.scrollLeft=e.scrollLeft)},this.scrollListener=()=>{var t;this.scrollStopTimer&&clearTimeout(this.scrollStopTimer),this.scrollStopTimer=setTimeout(()=>{this.setState(e=>({...this.calculateColumnVisibilityData(e.condensed)}))},100),this.setState({isScrolledFarthestLeft:((t=this.scrollContainer.current)==null?void 0:t.scrollLeft)===0}),this.props.stickyHeader&&this.stickyHeaderActive&&this.stickyHeaderScrolling()},this.handleHover=t=>()=>{this.setState({rowHovered:t})},this.handleFocus=t=>{var o;const e=this.fixedFirstColumns();if(this.scrollContainer.current==null||t.target==null)return;const l=t.target.parentNode,c=this.props?(o=this.state.columnVisibilityData[e])==null?void 0:o.rightEdge:0,n=l.offsetLeft-c;this.scrollContainer.current.scrollLeft>n&&(this.scrollContainer.current.scrollLeft=n)},this.navigateTable=t=>{var u;const e=this.fixedFirstColumns(),{currentColumn:l,previousColumn:a}=this.state,c=(u=this.state.columnVisibilityData[e-1])==null?void 0:u.rightEdge;if(!l||!a)return;let d=0;for(let h=0;h<l.index;h++)d+=this.state.columnVisibilityData[h].width;const{current:n}=this.scrollContainer;return()=>{let h=0;e?h=t==="right"?d-c+l.width:d-a.width-c:h=t==="right"?l.rightEdge:a.leftEdge,n&&(n.scrollLeft=h,requestAnimationFrame(()=>{this.setState(m=>({...this.calculateColumnVisibilityData(m.condensed)}))}))}},this.renderHeading=({heading:t,headingIndex:e,inFixedNthColumn:l,inStickyHeader:a})=>{var S;const{sortable:c,truncate:d=!1,columnContentTypes:n,defaultSortDirection:o,initialSortColumnIndex:u=0,verticalAlign:h,firstColumnMinWidth:m}=this.props,b=this.fixedFirstColumns(),{sortDirection:g=o,sortedColumnIndex:y=u,isScrolledFarthestLeft:T}=this.state;let E;const _=`heading-cell-${e}`,L=`stickyheader-${e}`,k=a?L:_;if(c){const v=c[e],x=v&&y===e;E={defaultSortDirection:o,sorted:x,sortable:v,sortDirection:x?g:"none",onSort:this.defaultOnSort(e),fixedNthColumn:b,inFixedNthColumn:b}}const R=a?this.tableHeadingWidths[e]:void 0,w=!T,F={header:!0,stickyHeadingCell:a,content:t,contentType:n[e],nthColumn:e<b,fixedFirstColumns:b,truncate:d,headingIndex:e,...E,verticalAlign:h,handleFocus:this.handleFocus,stickyCellWidth:R,fixedCellVisible:w,firstColumnMinWidth:m};return l&&a?[s.createElement(A,Object.assign({key:k},F,{setRef:v=>{this.setCellRef({ref:v,index:e,inStickyHeader:a})},inFixedNthColumn:!1})),s.createElement(A,Object.assign({key:`${k}-sticky`},F,{setRef:v=>{this.setCellRef({ref:v,index:e,inStickyHeader:a})},inFixedNthColumn:!!b,lastFixedFirstColumn:e===b-1,style:{left:(S=this.state.columnVisibilityData[e])==null?void 0:S.leftEdge}}))]:s.createElement(A,Object.assign({key:k},F,{setRef:v=>{this.setCellRef({ref:v,index:e,inStickyHeader:a})},lastFixedFirstColumn:e===b-1,inFixedNthColumn:l}))},this.totalsRowHeading=()=>{const{i18n:t,totals:e,totalsName:l}=this.props,a=l||{singular:t.translate("Polaris.DataTable.totalRowHeading"),plural:t.translate("Polaris.DataTable.totalsRowHeading")};return e&&e.filter(c=>c!=="").length>1?a.plural:a.singular},this.renderTotals=({total:t,index:e})=>{const l=this.fixedFirstColumns(),a=`totals-cell-${e}`,{truncate:c=!1,verticalAlign:d,columnContentTypes:n}=this.props;let o,u;e===0&&(o=this.totalsRowHeading()),t!==""&&e>0&&(u=n[e],o=t);const h=this.props.showTotalsInFooter;return s.createElement(A,{total:!0,totalInFooter:h,nthColumn:e<=l-1,firstColumn:e===0,key:a,content:o,contentType:u,truncate:c,verticalAlign:d})},this.getColSpan=(t,e,l,a)=>{if(this.fixedFirstColumns())return 1;const d=t||1,n=e||l,o=Math.floor(n/d),u=n%d;return a===0?o+u:o},this.defaultRenderRow=({row:t,index:e,inFixedNthColumn:l,rowHeights:a})=>{const{columnContentTypes:c,truncate:d=!1,verticalAlign:n,hoverable:o=!0,headings:u}=this.props,{condensed:h}=this.state,m=this.fixedFirstColumns(),b=D(i.TableRow,o&&i.hoverable);return s.createElement("tr",{key:`row-${e}`,className:b,onMouseEnter:this.handleHover(e),onMouseLeave:this.handleHover()},t.map((g,y)=>{const T=e===this.state.rowHovered,E=`cell-${y}-row-${e}`,_=this.getColSpan(t.length,u.length,c.length,y);return s.createElement(A,{key:E,content:g,contentType:c[y],nthColumn:y<=m-1,firstColumn:y===0,truncate:d,verticalAlign:n,colSpan:_,hovered:T,style:a?{height:`${a[e]}px`}:{},inFixedNthColumn:h&&l})}))},this.defaultOnSort=t=>{const{onSort:e,defaultSortDirection:l="ascending",initialSortColumnIndex:a}=this.props,{sortDirection:c=l,sortedColumnIndex:d=a}=this.state;let n=l;return d===t&&(n=c==="ascending"?"descending":"ascending"),()=>{this.setState({sortDirection:n,sortedColumnIndex:t},()=>{e&&e(t,n)})}}}componentDidMount(){this.handleResize()}componentDidUpdate(r){ae(r,this.props)||this.handleResize()}componentWillUnmount(){this.handleResize.cancel()}render(){var z,V,H;const{headings:r,totals:t,showTotalsInFooter:e,rows:l,footerContent:a,hideScrollIndicator:c=!1,increasedTableDensity:d=!1,hasZebraStripingOnData:n=!1,stickyHeader:o=!1,hasFixedFirstColumn:u=!1,pagination:h}=this.props,{condensed:m,columnVisibilityData:b,isScrolledFarthestLeft:g,isScrolledFarthestRight:y}=this.state,T=this.fixedFirstColumns(),E=l.length%2===0,_=D(i.DataTable,m&&i.condensed,t&&i.ShowTotals,e&&i.ShowTotalsInFooter,n&&i.ZebraStripingOnData,n&&E&&i.RowCountIsEven),L=D(i.TableWrapper,m&&i.condensed,d&&i.IncreasedTableDensity,o&&i.StickyHeaderEnabled),k=s.createElement("tr",null,r.map((C,p)=>this.renderHeading({heading:C,headingIndex:p,inFixedNthColumn:!1,inStickyHeader:!1}))),R=t?s.createElement("tr",null,t.map((C,p)=>this.renderTotals({total:C,index:p}))):null,w=l.map(C=>C.slice(0,T)),F=r.slice(0,T),S=t==null?void 0:t.slice(0,T),v=(z=this.table.current)==null?void 0:z.children[0].childNodes,x=(V=this.table.current)==null?void 0:V.children[1].childNodes,I=te(v),N=te(x),O=m&&T!==0&&s.createElement("table",{className:D(i.FixedFirstColumn,!g&&i.separate),style:{width:`${(H=b[T-1])==null?void 0:H.rightEdge}px`}},s.createElement("thead",null,s.createElement("tr",{style:{height:`${I[0]}px`}},F.map((C,p)=>this.renderHeading({heading:C,headingIndex:p,inFixedNthColumn:!0,inStickyHeader:!1}))),t&&!e&&s.createElement("tr",{style:{height:`${I[1]}px`}},S==null?void 0:S.map((C,p)=>this.renderTotals({total:C,index:p})))),s.createElement("tbody",null,w.map((C,p)=>this.defaultRenderRow({row:C,index:p,inFixedNthColumn:!0,rowHeights:N}))),t&&e&&s.createElement("tfoot",null,s.createElement("tr",null,S==null?void 0:S.map((C,p)=>this.renderTotals({total:C,index:p}))))),B=l.map((C,p)=>this.defaultRenderRow({row:C,index:p,inFixedNthColumn:!1})),W=a?s.createElement("div",{className:i.Footer},a):null,$=h?s.createElement(me,Object.assign({type:"table"},h)):null,j=e?null:R,q=e?s.createElement("tfoot",null,R):null,M=C=>c?null:s.createElement(pe,{columnVisibilityData:b,isScrolledFarthestLeft:g,isScrolledFarthestRight:y,navigateTableLeft:this.navigateTable("left"),navigateTableRight:this.navigateTable("right"),fixedFirstColumns:T,setRef:p=>{C==="header"?this.headerNav=p:C==="sticky"&&(this.stickyNav=p)}}),Z=o?s.createElement(ge,null,s.createElement("div",{className:i.StickyHeaderWrapper,role:"presentation"},s.createElement(ie,{boundingElement:this.dataTable.current,onStickyChange:C=>{this.changeHeadingFocus(),this.stickyHeaderActive=C}},C=>{const p=D(i.StickyHeaderInner,C&&i["StickyHeaderInner-isSticky"]),U=D(i.StickyHeaderTable,!g&&i.separate);return s.createElement("div",{className:p},s.createElement("div",null,M("sticky")),s.createElement("table",{className:U,ref:this.stickyTable},s.createElement("thead",null,s.createElement("tr",{className:i.StickyTableHeadingsRow},r.map((G,Q)=>this.renderHeading({heading:G,headingIndex:Q,inFixedNthColumn:!!(Q<=T-1&&T),inStickyHeader:!0}))))))}))):null;return s.createElement("div",{className:L,ref:this.dataTable},Z,M("header"),s.createElement("div",{className:_},s.createElement("div",{className:i.ScrollContainer,ref:this.scrollContainer},s.createElement(X,{event:"resize",handler:this.handleResize}),s.createElement(X,{capture:!0,passive:!0,event:"scroll",handler:this.scrollListener}),O,s.createElement("table",{className:i.Table,ref:this.table},s.createElement("thead",null,k,j),s.createElement("tbody",null,B),q)),$,W))}fixedFirstColumns(){const{hasFixedFirstColumn:r,fixedFirstColumns:t=0,headings:e}=this.props,l=r&&!t?1:t;return l>=e.length?0:l}}function De(f){const r=K();return s.createElement(ye,Object.assign({},f,{i18n:r}))}export{De as D};
