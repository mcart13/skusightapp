import{r as c,S as r}from"./index-C_P7ACqV.js";import{M as Q,c as g,J as N,a as h,K as de,N as me,O as fe,P as pe,Q as ge,u as Ee,v as he,T as Y,d as Z,B as ve,I as x,w as be,W as Fe,S as Me}from"./ButtonGroup-Bgv38W4W.js";import{E as ke,K as H,r as O,p as K,s as ye,t as Ce}from"./Page-DvtG3tiZ.js";import{S as Se,F as xe}from"./context-Cuq_S-Fv.js";import{_ as Ne,a as Pe,b as Ie,T as G,c as we,C as De}from"./CSSTransition-BI2FqCs3.js";import{S as Te}from"./Banner-4MJ0AgcI.js";import{I as Be}from"./InlineGrid-B9iUkR0h.js";var L={Backdrop:"Polaris-Backdrop",transparent:"Polaris-Backdrop--transparent",belowNavigation:"Polaris-Backdrop--belowNavigation"};function Le(){const e=c.useContext(Se);if(!e)throw new Q("No ScrollLockManager was provided.");return e}function _e(e){const t=Le();return c.useEffect(()=>(t.registerScrollLock(),()=>{t.unregisterScrollLock()}),[t]),null}function He(e){const{onClick:t,onTouchStart:i,belowNavigation:a,transparent:n,setClosing:o}=e,l=g(L.Backdrop,a&&L.belowNavigation,n&&L.transparent),u=()=>{o&&o(!0)},s=()=>{o&&o(!1),t&&t()};return r.createElement(r.Fragment,null,r.createElement(_e,null),r.createElement("div",{className:l,onClick:s,onTouchStart:i,onMouseDown:u}))}const Oe=c.createContext(void 0),Ae=c.memo(function({children:t,disabled:i,root:a}){return c.useEffect(()=>{if(i||!a)return;const n=Ue(a)?a.current:a;!n||n.querySelector("[autofocus]")||N(n,!1)},[i,a]),r.createElement(r.Fragment,null,t)});function Ue(e){return e.current!==void 0}function Re(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function A(e,t){var i=function(o){return t&&c.isValidElement(o)?t(o):o},a=Object.create(null);return e&&c.Children.map(e,function(n){return n}).forEach(function(n){a[n.key]=i(n)}),a}function We(e,t){e=e||{},t=t||{};function i(f){return f in t?t[f]:e[f]}var a=Object.create(null),n=[];for(var o in e)o in t?n.length&&(a[o]=n,n=[]):n.push(o);var l,u={};for(var s in t){if(a[s])for(l=0;l<a[s].length;l++){var m=a[s][l];u[a[s][l]]=i(m)}u[s]=i(s)}for(l=0;l<n.length;l++)u[n[l]]=i(n[l]);return u}function b(e,t,i){return i[t]!=null?i[t]:e.props[t]}function je(e,t){return A(e.children,function(i){return c.cloneElement(i,{onExited:t.bind(null,i),in:!0,appear:b(i,"appear",e),enter:b(i,"enter",e),exit:b(i,"exit",e)})})}function ze(e,t,i){var a=A(e.children),n=We(t,a);return Object.keys(n).forEach(function(o){var l=n[o];if(c.isValidElement(l)){var u=o in t,s=o in a,m=t[o],f=c.isValidElement(m)&&!m.props.in;s&&(!u||f)?n[o]=c.cloneElement(l,{onExited:i.bind(null,l),in:!0,exit:b(l,"exit",e),enter:b(l,"enter",e)}):!s&&u&&!f?n[o]=c.cloneElement(l,{in:!1}):s&&u&&c.isValidElement(m)&&(n[o]=c.cloneElement(l,{onExited:i.bind(null,l),in:m.props.in,exit:b(l,"exit",e),enter:b(l,"enter",e)}))}}),n}var Ve=Object.values||function(e){return Object.keys(e).map(function(t){return e[t]})},Ke={component:"div",childFactory:function(t){return t}},U=function(e){Ne(t,e);function t(a,n){var o;o=e.call(this,a,n)||this;var l=o.handleExited.bind(Re(o));return o.state={contextValue:{isMounting:!0},handleExited:l,firstRender:!0},o}var i=t.prototype;return i.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},i.componentWillUnmount=function(){this.mounted=!1},t.getDerivedStateFromProps=function(n,o){var l=o.children,u=o.handleExited,s=o.firstRender;return{children:s?je(n,u):ze(n,l,u),firstRender:!1}},i.handleExited=function(n,o){var l=A(this.props.children);n.key in l||(n.props.onExited&&n.props.onExited(o),this.mounted&&this.setState(function(u){var s=Pe({},u.children);return delete s[n.key],{children:s}}))},i.render=function(){var n=this.props,o=n.component,l=n.childFactory,u=Ie(n,["component","childFactory"]),s=this.state.contextValue,m=Ve(this.state.children).map(l);return delete u.appear,delete u.enter,delete u.exit,o===null?r.createElement(G.Provider,{value:s},m):r.createElement(G.Provider,{value:s},r.createElement(o,u,m))},t}(r.Component);U.propTypes={};U.defaultProps=Ke;var _={Body:"Polaris-Modal__Body",NoScrollBody:"Polaris-Modal__NoScrollBody",IFrame:"Polaris-Modal__IFrame"},$={Section:"Polaris-Modal-Section",titleHidden:"Polaris-Modal-Section--titleHidden"};function ee({children:e,flush:t=!1,subdued:i=!1,titleHidden:a=!1}){const n=g($.Section,a&&$.titleHidden);return r.createElement("div",{className:n},r.createElement(h,Object.assign({as:"section",padding:t?"0":"400"},a&&{paddingInlineEnd:"0"},i&&{background:"bg-surface-tertiary"}),e))}var d={Container:"Polaris-Modal-Dialog__Container",Dialog:"Polaris-Modal-Dialog",Modal:"Polaris-Modal-Dialog__Modal",limitHeight:"Polaris-Modal-Dialog--limitHeight",sizeSmall:"Polaris-Modal-Dialog--sizeSmall",sizeLarge:"Polaris-Modal-Dialog--sizeLarge",sizeFullScreen:"Polaris-Modal-Dialog--sizeFullScreen",animateFadeUp:"Polaris-Modal-Dialog--animateFadeUp",entering:"Polaris-Modal-Dialog--entering",exiting:"Polaris-Modal-Dialog--exiting",exited:"Polaris-Modal-Dialog--exited",entered:"Polaris-Modal-Dialog--entered"};function Ge({trapping:e}){const t=c.useContext(xe),i=c.useId();if(!t)throw new Q("No FocusManager was provided.");const{trapFocusList:a,add:n,remove:o}=t,l=a[0]===i,u=c.useMemo(()=>({canSafelyFocus:l}),[l]);return c.useEffect(()=>{if(e)return n(i),()=>{o(i)}},[n,i,o,e]),u}function $e({trapping:e=!0,children:t}){const{canSafelyFocus:i}=Ge({trapping:e}),a=c.useRef(null),[n,o]=c.useState(!0);c.useEffect(()=>{const s=i&&!(a.current&&a.current.contains(document.activeElement))?!e:!0;o(s)},[i,e]);const l=s=>{const m=a.current&&a.current.contains(document.activeElement);e===!1||!a.current||m||s.target instanceof Element&&s.target.matches(`${de.selector} *`)||i&&s.target instanceof HTMLElement&&a.current!==s.target&&!a.current.contains(s.target)&&N(a.current)},u=s=>{if(e===!1||!a.current)return;const m=me(a.current),f=fe(a.current);s.target===f&&!s.shiftKey&&(s.preventDefault(),pe(a.current)),s.target===m&&s.shiftKey&&(s.preventDefault(),ge(a.current))};return r.createElement(Ae,{disabled:n,root:a.current},r.createElement("div",{ref:a},r.createElement(ke,{event:"focusin",handler:l}),r.createElement(H,{keyCode:O.Tab,keyEvent:"keydown",handler:u}),t))}function qe({instant:e,labelledBy:t,children:i,limitHeight:a,size:n,onClose:o,onExited:l,onEntered:u,setClosing:s,hasToasts:m,...f}){const P=Ee(),E=c.useRef(null),k=c.useContext(Oe);let F;k&&(F=k.toastMessages);const I=g(d.Modal,n&&d[he("size",n)],a&&d.limitHeight),p=e?we:Je;c.useEffect(()=>{E.current&&!E.current.contains(document.activeElement)&&N(E.current)},[]);const w=()=>{s&&s(!0)},y=()=>{s&&s(!1),o()},C=r.createElement("div",{"aria-live":"assertive"},F?F.map(M=>r.createElement(Y,{visuallyHidden:!0,as:"p",key:M.id},M.content)):null);return r.createElement(p,Object.assign({},f,{nodeRef:E,mountOnEnter:!0,unmountOnExit:!0,timeout:parseInt(P.motion["motion-duration-200"],10),onEntered:u,onExited:l}),r.createElement("div",{className:d.Container,"data-polaris-layer":!0,"data-polaris-overlay":!0,ref:E},r.createElement($e,null,r.createElement("div",{role:"dialog","aria-modal":!0,"aria-label":t,"aria-labelledby":t,tabIndex:-1,className:d.Dialog},r.createElement("div",{className:I},r.createElement(H,{keyCode:O.Escape,keyEvent:"keydown",handler:w}),r.createElement(H,{keyCode:O.Escape,handler:y}),i),C))))}const Xe={appear:g(d.animateFadeUp,d.entering),appearActive:g(d.animateFadeUp,d.entered),enter:g(d.animateFadeUp,d.entering),enterActive:g(d.animateFadeUp,d.entered),exit:g(d.animateFadeUp,d.exiting),exitActive:g(d.animateFadeUp,d.exited)};function Je({children:e,...t}){return r.createElement(De,Object.assign({},t,{classNames:Xe}),e)}function q({pressed:e,onClick:t}){const i=Z();return r.createElement(ve,{variant:"tertiary",pressed:e,icon:Te,onClick:t,accessibilityLabel:i.translate("Polaris.Common.close")})}function Qe({id:e,children:t,closing:i,titleHidden:a,onClose:n}){const o="400",l="400";return a||!t?r.createElement(h,{position:"absolute",insetInlineEnd:o,insetBlockStart:l,zIndex:"1"},r.createElement(q,{onClick:n})):r.createElement(h,{paddingBlockStart:"400",paddingBlockEnd:"400",paddingInlineStart:o,paddingInlineEnd:o,borderBlockEndWidth:"025",borderColor:"border",background:"bg-surface-tertiary"},r.createElement(Be,{columns:{xs:"1fr auto"},gap:"400"},r.createElement(x,{gap:"400",blockAlign:"center"},r.createElement(Y,{id:e,as:"h2",variant:"headingMd",breakWord:!0},t)),r.createElement(q,{pressed:i,onClick:n})))}function Ye({primaryAction:e,secondaryActions:t,children:i}){const a=e&&K(e,{variant:"primary"})||null,n=t&&K(t)||null,o=a||n?r.createElement(x,{gap:"200"},n,a):null;return r.createElement(x,{gap:"400",blockAlign:"center"},r.createElement(h,{borderColor:"border",borderBlockStartWidth:"025",padding:"400",width:"100%"},r.createElement(x,{gap:"400",blockAlign:"center",align:"space-between"},r.createElement(h,null,i),o)))}const X=200,Ze=400,et=function({children:t,title:i,titleHidden:a=!1,src:n,iFrameName:o,open:l,instant:u,sectioned:s,loading:m,size:f,limitHeight:P,footer:E,primaryAction:k,secondaryActions:F,onScrolledToBottom:I,activator:p,activatorWrapper:w="div",onClose:y,onIFrameLoad:C,onTransitionEnd:M,noScroll:te}){const[ne,D]=c.useState(X),[ae,R]=c.useState(!1),W=c.useId(),j=c.useRef(null),re=Z().translate("Polaris.Modal.iFrameTitle");let z,V;const oe=c.useCallback(()=>{M&&M()},[M]),ie=c.useCallback(()=>{D(X);const v=p&&J(p)?p&&p.current:j.current;v&&requestAnimationFrame(()=>N(v))},[p]),le=c.useCallback(v=>{const S=v.target;if(S&&S.contentWindow)try{D(S.contentWindow.document.body.scrollHeight)}catch{D(Ze)}C!=null&&C(v)},[C]);if(l){const v=!E&&!k&&!F?null:r.createElement(Ye,{primaryAction:k,secondaryActions:F},E),S=s?be(t,ee,{titleHidden:a}):t,B=m?r.createElement(h,{padding:"400"},r.createElement(x,{gap:"400",align:"center",blockAlign:"center"},r.createElement(Me,null))):S,ce=te?r.createElement("div",{className:_.NoScrollBody},r.createElement(h,{width:"100%",overflowX:"hidden",overflowY:"hidden"},B)):r.createElement(Ce,{shadow:!0,className:_.Body,onScrolledToBottom:I},B),ue=n?r.createElement("iframe",{name:o,title:re,src:n,className:_.IFrame,onLoad:le,style:{height:`${ne}px`}}):ce;z=r.createElement(qe,{instant:u,labelledBy:W,onClose:y,onEntered:oe,onExited:ie,size:f,limitHeight:P,setClosing:R},r.createElement(Qe,{titleHidden:a,id:W,closing:ae,onClose:y},i),ue,v),V=r.createElement(He,{setClosing:R,onClick:y})}const T=!u,se=p&&!J(p)?r.createElement(h,{ref:j,as:w},p):null;return r.createElement(Fe.Provider,{value:!0},se,r.createElement(ye,{idPrefix:"modal"},r.createElement(U,{appear:T,enter:T,exit:T},z),V))};function J(e){return Object.prototype.hasOwnProperty.call(e,"current")}et.Section=ee;export{He as B,Oe as F,et as M,U as T,$e as a};
